<h2>MIDTERM EXAM</h2>
<%= link_to "Add Manually", edit_user_table_midtermtable_path(@user, @table, @table), class: "bg-blue mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent" %><br>
<small><i class="glyphicon glyphicon-exclamation-sign"></i> MANUALLY IS THE MOST IMPORTANT </small>
<table class="table-finalexam table table-striped table-crop table-hover mdl-shadow--3dp"> 
    <caption>
        FINAL TABLE
        <span class="pull-right"> 
            <i class="text-manual glyphicon glyphicon-stop"></i> MANUALLY
            <i class="text-final glyphicon glyphicon-stop"></i> MIDTER TABLE
        </span>
    </caption>
    <tr>
        <td>DAY</td>
        <td>08:00 - 11:00</td>
        <td>12:00 - 15:00</td>
        <td>15:30 - 18:30</td>
    </tr>
    <% @myexam.each_with_index do |a, index| %>
        <% if @count == 0 %> 
            <tr> 
            <td> <%= a[0] %> </td>
        <% end %>
        <td>
        <% @classes.each do |class_| %>
            <!-- manual -->
            <% if class_.dayMidterm.to_s.downcase == a[0].gsub(' ', '').to_s.downcase %>
                <% if (class_.timeMidterm.to_s[0..5].gsub(/[\s:-]/, '') == '0800' and @count == 0) or
                      (class_.timeMidterm.to_s[0..5].gsub(/[\s:-]/, '') == '1200' and @count == 1) or
                      (class_.timeMidterm.to_s[0..5].gsub(/[\s:-]/, '') == '1530' and @count == 2) %>
                        <span class="text-manual"><%= class_.subject %><br></span>
                        <% @is_shown.add(class_.subject_code) %>
                <% end %>   
            <% end %>

            <% if not @is_shown_manual.include? class_.subject_code and 
                  not @is_shown.include? class_.subject_code and 
                  a[1].include? class_.subject_code %>
                 <%= class_.subject %>
                 <% @is_shown.add(class_.subject_code) %>
                 <br>
            <% end %>
        <% end %>
        </td>
        <% @count += 1 %>
        <% @count = 0 if @count == 3 %>
        <% if @count == 0 %> </tr> <% end %>
    <% end %>
</table>

<table class="table table-striped table-crop table-hover mdl-shadow--3dp"> 
    <caption>Manual</caption>
    <thead>
        <tr>
            <th class="text-center">Subject code</th>
            <th class="text-center">Subject</th>
            <th class="text-center">Day</th>
            <th class="text-center">Time</th>
        </tr>
    </thead>
    <tbody>
        <% @classes.each do |class_| %>
            <% if not @is_shown.include? class_.subject_code and @is_shown_manual.include? class_.subject_code %>
                <tr>    
                    <td><%= class_.subject_code%></td>
                    <td><%= class_.subject%></td>
                    <td><%= class_.dayMidterm%></td>
                    <td><%= class_.timeMidterm%></td>
                </tr>
                <% @is_shown.add(class_.subject_code) %>
            <% end %>
        <% end %>
    </tbody>
</table> 

<%= link_to "BACK", user_table_classtables_path, id: @table, class: "bg-red mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent" %>


